# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
Error: Cannot find module '@tensorflow/tfjs-node'
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install @tensorflow/tfjs-node canvas
```

**–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- `@tensorflow/tfjs-node` - TensorFlow.js –¥–ª—è Node.js (94 –ø–∞–∫–µ—Ç–∞)
- `canvas` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (29 –ø–∞–∫–µ—Ç–æ–≤)

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ú–æ–¥—É–ª—å `documentVerification.js` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **graceful degradation**:

- ‚úÖ –ï—Å–ª–∏ Face-API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è**
- ‚úÖ –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ **–∫–∞—á–µ—Å—Ç–≤–∞** –∏ **OCR**

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ª–æ–≥–∏

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏:

```
‚úÖ Face-API —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
‚úÖ Face-API –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
```

–ò–ª–∏ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
‚ö†Ô∏è Face-API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç TensorFlow). –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞.
   –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: npm install @tensorflow/tfjs-node canvas
```

```
‚ö†Ô∏è –ú–æ–¥–µ–ª–∏ Face-API –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤: /path/to/models
   –ó–∞–ø—É—Å—Ç–∏—Ç–µ: node migrations/download-face-api-models.js
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### documentVerification.js

**–ë—ã–ª–æ:**
```javascript
const faceapi = require('@vladmandic/face-api');
// –û—à–∏–±–∫–∞ –µ—Å–ª–∏ TensorFlow –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

**–°—Ç–∞–ª–æ:**
```javascript
let faceapi = null;
let faceApiAvailable = false;

try {
  faceapi = require('@vladmandic/face-api');
  // ...
  faceApiAvailable = true;
  console.log('‚úÖ Face-API —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω');
} catch (error) {
  console.warn('‚ö†Ô∏è Face-API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞.');
}
```

### –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Face-API —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:

```javascript
async function detectFace(imagePath) {
  if (!faceApiAvailable) {
    return { 
      passed: true, 
      skipped: true, 
      message: 'Face detection skipped - Face-API not available' 
    };
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üü¢ –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º (–≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ‚úÖ `sharp` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `tesseract.js` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `@tensorflow/tfjs-node` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `canvas` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ú–æ–¥–µ–ª–∏ Face-API –∑–∞–≥—Ä—É–∂–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR)
3. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞
4. ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏—Ü

---

### üü° –ë–∞–∑–æ–≤—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ Face-API)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ‚úÖ `sharp` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `tesseract.js` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR)
3. ‚è≠Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (–ø—Ä–æ–ø—É—â–µ–Ω–æ)
4. ‚è≠Ô∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏—Ü (–ø—Ä–æ–ø—É—â–µ–Ω–æ)

---

### üî¥ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (—Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ‚úÖ `sharp` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. ‚è≠Ô∏è –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (–ø—Ä–æ–ø—É—â–µ–Ω–æ)
3. ‚è≠Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (–ø—Ä–æ–ø—É—â–µ–Ω–æ)
4. ‚è≠Ô∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏—Ü (–ø—Ä–æ–ø—É—â–µ–Ω–æ)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
npm install sharp tesseract.js @tensorflow/tfjs-node canvas

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª–∏
node migrations/download-face-api-models.js
```

### –î–ª—è production

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª–∏ Face-API
- –ü–æ–ª—É—á–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
- –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ TensorFlow (—ç–∫–æ–Ω–æ–º–∏—è ~500MB)
- –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏—Ü
- –ö–∞—á–µ—Å—Ç–≤–æ –∏ OCR –≤—Å—ë —Ä–∞–≤–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∞—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

## –†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

| –ü–∞–∫–µ—Ç | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|------------|
| sharp | ~20 MB | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| tesseract.js | ~30 MB | OCR - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (–≤–∞–∂–Ω–æ) |
| @tensorflow/tfjs-node | ~450 MB | –ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| canvas | ~20 MB | –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è Face-API |
| **–í—Å–µ–≥–æ** | **~520 MB** | |

**–ë–µ–∑ TensorFlow:** ~50 MB (–≤ 10 —Ä–∞–∑ –º–µ–Ω—å—à–µ!)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm start

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
# ‚úÖ Face-API —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω      <- –ï—Å–ª–∏ TensorFlow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
# ‚ö†Ô∏è Face-API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω            <- –ï—Å–ª–∏ TensorFlow –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ @tensorflow/tfjs-node

**Windows:** –¢—Ä–µ–±—É–µ—Ç—Å—è Python –∏ Build Tools
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ windows-build-tools
npm install --global --production windows-build-tools
```

**Linux/Mac:** –¢—Ä–µ–±—É–µ—Ç—Å—è make –∏ g++
```bash
sudo apt-get install build-essential  # Ubuntu/Debian
brew install gcc                       # macOS
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ canvas

**Windows:** –¢—Ä–µ–±—É–µ—Ç—Å—è GTK
```bash
# –°–∫–∞—á–∞–π—Ç–µ GTK –¥–ª—è Windows
# https://github.com/Automattic/node-canvas/wiki/Installation:-Windows
```

**Linux:**
```bash
sudo apt-get install libcairo2-dev libjpeg-dev libpango1.0-dev libgif-dev
```

**macOS:**
```bash
brew install pkg-config cairo pango libpng jpeg giflib librsvg
```

## –ò—Ç–æ–≥

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞** - —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–∏–±–∫–∞—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –Ω–∞–±–æ—Ä–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
‚úÖ **Graceful degradation** - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö  
‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–µ –ª–æ–≥–∏** - –≤–∏–¥–Ω–æ –∫–∞–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã  

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (–≤—Å–µ 4 —É—Ä–æ–≤–Ω—è)
- –ò–ª–∏ –±–∞–∑–æ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (—Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ + OCR)
- –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –¥–æ—Å—Ç—É–ø–Ω—ã–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2024-01-15  
**–í–µ—Ä—Å–∏—è:** 1.1.0
