// ============================================
// –†–ï–ó–Æ–ú–ï –î–û–ë–ê–í–õ–ï–ù–ù–´–• –§–£–ù–ö–¶–ò–ô –ò –ö–û–ú–ü–û–ù–ï–ù–¢–û–í
// ============================================

/**
 * ‚úÖ –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–• (Backend)
 * 
 * 1. Notification (src/models/Notification.js)
 *    - –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 *    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∏–ø—ã: rental_reminder, penalty_notice, rental_started, rental_completed, status_update
 *    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —á–µ—Ä–µ–∑ Telegram, Email, In-App
 *    - –û—Ç–º–µ—á–∞–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ/–Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * 
 * 2. Penalty (src/models/Penalty.js)
 *    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏
 *    - –¢–∏–ø—ã: late_return (–ø—Ä–æ—Å—Ä–æ—á–∫–∞), damage (–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ), missing_item (—É—Ç–µ—Ä—è), other
 *    - –°—Ç–∞—Ç—É—Å—ã: pending, approved, paid, waived, disputed
 *    - –•—Ä–∞–Ω–∏—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (—Ñ–æ—Ç–æ, –∑–∞–º–µ—Ç–∫–∏)
 *    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–¥–æ–±—Ä–µ–Ω–∏—è/–æ–ø–ª–∞—Ç—ã
 * 
 * 3. Log (src/models/Log.js)
 *    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
 *    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
 *    - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç IP –∞–¥—Ä–µ—Å –∏ User Agent
 *    - –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω –ø–æ –¥–∞—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
 */

/**
 * ‚úÖ –°–ï–†–í–ò–°–´ (Backend)
 * 
 * 1. NotificationService (src/services/notificationService.js)
 *    - sendNotification() - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
 *    - sendTelegramNotification() - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram Bot API
 *    - sendEmailNotification() - –æ—Ç–ø—Ä–∞–≤–∫–∞ Email —á–µ—Ä–µ–∑ Nodemailer
 *    - sendRentalReminderNotification() - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 1 –¥–µ–Ω—å –¥–æ –∫–æ–Ω—Ü–∞ –∞—Ä–µ–Ω–¥—ã
 *    - sendPenaltyNotification() - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —à—Ç—Ä–∞—Ñ–µ
 *    - sendRentalStartNotification() - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –∞—Ä–µ–Ω–¥—ã
 *    - sendRentalCompletedNotification() - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∞—Ä–µ–Ω–¥—ã
 *    - markAsRead() - –æ—Ç–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
 *    - markAllAsRead() - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
 *    - getUserNotifications() - –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * 
 * 2. SchedulerService (src/services/schedulerService.js)
 *    - initialize() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
 *    - scheduleReminderCheck() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ö–ê–ñ–î–´–ô –ß–ê–°
 *      * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 1 –¥–µ–Ω—å –¥–æ –∫–æ–Ω—Ü–∞ –∞—Ä–µ–Ω–¥—ã
 *    - scheduleOverdueCheck() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥ –ö–ê–ñ–î–´–ï 30 –ú–ò–ù–£–¢
 *      * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —à—Ç—Ä–∞—Ñ—ã –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É (20% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞ –¥–µ–Ω—å)
 *      * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —à—Ç—Ä–∞—Ñ–∞—Ö
 *    - scheduleNotificationCleanup() - –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ –ö–ê–ñ–î–´–ô –î–ï–ù–¨ –í 00:00
 *      * –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (>30 –¥–Ω–µ–π)
 */

/**
 * ‚úÖ API ENDPOINTS (Backend)
 * 
 * –®–¢–†–ê–§–´ (src/routes/penalties.js)
 * GET    /api/penalties                    - –≤—Å–µ —à—Ç—Ä–∞—Ñ—ã (–∞–¥–º–∏–Ω)
 * GET    /api/penalties/user/:userId       - —à—Ç—Ä–∞—Ñ—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * POST   /api/penalties                    - —Å–æ–∑–¥–∞—Ç—å —à—Ç—Ä–∞—Ñ (–∞–¥–º–∏–Ω)
 * GET    /api/penalties/:id                - –ø–æ–ª—É—á–∏—Ç—å —à—Ç—Ä–∞—Ñ –ø–æ ID
 * PATCH  /api/penalties/:id/approve        - –æ–¥–æ–±—Ä–∏—Ç—å —à—Ç—Ä–∞—Ñ (–∞–¥–º–∏–Ω)
 * PATCH  /api/penalties/:id/waive          - –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞—Ç—å —à—Ç—Ä–∞—Ñ (–∞–¥–º–∏–Ω)
 * PATCH  /api/penalties/:id/mark-paid      - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π
 * GET    /api/penalties/stats/overview     - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —à—Ç—Ä–∞—Ñ–∞–º
 * 
 * –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø (src/routes/notifications.js)
 * GET    /api/notifications/user/:userId           - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * GET    /api/notifications/user/:userId/unread    - –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * PATCH  /api/notifications/:id/read               - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
 * PATCH  /api/notifications/user/:userId/read-all  - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
 * DELETE /api/notifications/:id                    - —É–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
 * DELETE /api/notifications/user/:userId/all       - —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * GET    /api/notifications/:id                    - –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ ID
 * 
 * –õ–û–ì–ò (src/routes/logs.js)
 * GET    /api/logs                        - –≤—Å–µ –ª–æ–≥–∏ (–∞–¥–º–∏–Ω)
 * GET    /api/logs/admin/:adminId         - –ª–æ–≥–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
 * GET    /api/logs/stats/actions          - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
 * GET    /api/logs/stats/targets          - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ü–µ–ª–µ–≤—ã–º –º–æ–¥–µ–ª—è–º
 * GET    /api/logs/:id                    - –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥ –ø–æ ID
 * 
 * –ê–ù–ê–õ–ò–¢–ò–ö–ê (src/routes/analytics.js)
 * GET    /api/analytics/overview          - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
 * GET    /api/analytics/revenue           - –¥–æ—Ö–æ–¥—ã (period: day/week/month/all)
 * GET    /api/analytics/consoles          - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–Ω—Å–æ–ª—è–º
 * GET    /api/analytics/top-users         - —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (limit: 10)
 * GET    /api/analytics/penalties         - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —à—Ç—Ä–∞—Ñ–∞–º
 * GET    /api/analytics/activity          - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (days: 30)
 * GET    /api/analytics/user/:userId      - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 */

/**
 * ‚úÖ MIDDLEWARE
 * 
 * 1. rateLimiter.js
 *    - generalLimiter: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç (–∫–æ –≤—Å–µ–º endpoints)
 *    - loginLimiter: 5 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç (—Ç–æ–ª—å–∫–æ –¥–ª—è login)
 *    - createLimiter: 10 —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞ 1 –º–∏–Ω—É—Ç—É
 *    - updateLimiter: 20 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞ 1 –º–∏–Ω—É—Ç—É
 * 
 * 2. validators.js
 *    - validateLogin - –ø—Ä–æ–≤–µ—Ä–∫–∞ username/password
 *    - validateRentalCreate - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥—ã
 *    - validatePenaltyCreate - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —à—Ç—Ä–∞—Ñ–∞
 *    - validateConsoleUpdate - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Å–æ–ª–∏
 *    - validateUserBlock - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 *    - validateMongoId - –ø—Ä–æ–≤–µ—Ä–∫–∞ MongoDB ID –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 *    - handleValidationErrors - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
 */

/**
 * ‚úÖ –§–£–ù–ö–¶–ò–ò –ë–û–¢–ê (Telegram)
 * 
 * /notifications - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
 *    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
 *    - –í—ã–¥–µ–ª—è–µ—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ (‚óè)
 *    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞—Ç—É –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
 * 
 * /penalties - –ø—Ä–æ—Å–º–æ—Ç—Ä —à—Ç—Ä–∞—Ñ–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 *    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —à—Ç—Ä–∞—Ñ—ã
 *    - –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ
 *    - –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ —à—Ç—Ä–∞—Ñ–∞
 *    - –¢–∏–ø —à—Ç—Ä–∞—Ñ–∞ (–ø—Ä–æ—Å—Ä–æ—á–∫–∞, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ, —É—Ç–µ—Ä—è)
 */

/**
 * ‚úÖ –£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –ü–ê–ö–ï–¢–´
 * 
 * npm install node-cron          - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (cron jobs)
 * npm install nodemailer         - –æ—Ç–ø—Ä–∞–≤–∫–∞ Email
 * npm install express-validator  - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
 * npm install express-rate-limit - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
 */

/**
 * ‚úÖ –ü–õ–ê–ù–ò–†–û–í–©–ò–ö –ó–ê–î–ê–ß (Cron Jobs)
 * 
 * –ö–ê–ñ–î–´–ô –ß–ê–° (0 * * * *):
 *   ‚Ü≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–µ–Ω–¥, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
 *   ‚Ü≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ Telegram/Email
 * 
 * –ö–ê–ñ–î–´–ï 30 –ú–ò–ù–£–¢ (* /30 * * * *):
 *   ‚Ü≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥
 *   ‚Ü≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É
 *   ‚Ü≥ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —à—Ç—Ä–∞—Ñ–∞—Ö
 * 
 * –ö–ê–ñ–î–´–ô –î–ï–ù–¨ –í 00:00 (0 0 * * *):
 *   ‚Ü≥ –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (>30 –¥–Ω–µ–π)
 */

/**
 * ‚úÖ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
 * 
 * EMAIL_SERVICE=gmail
 * EMAIL_USER=your-email@gmail.com
 * EMAIL_PASSWORD=your-app-password
 * TELEGRAM_BOT_TOKEN=xxxxxxx
 * MONGODB_URI=mongodb://localhost:27017/ps4-rental
 * PORT=5000
 * API_URL=http://localhost:5000/api
 */

/**
 * üìä –û–°–û–ë–ï–ù–ù–û–°–¢–ò
 * 
 * ‚úì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É (20% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏/–¥–µ–Ω—å)
 * ‚úì –î–≤—É—Ö–∫–∞–Ω–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Telegram + Email)
 * ‚úì –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
 * ‚úì –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
 * ‚úì Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
 * ‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
 * ‚úì –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å 3 —Ç–∏–ø–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
 * ‚úì –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
 */
